(this["webpackJsonplightsearch-admin-panel"]=this["webpackJsonplightsearch-admin-panel"]||[]).push([[0],{154:function(e,t,a){},157:function(e,t,a){},161:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a.n(i),s=a(20),l=a.n(s),r=(a(84),a(85),a(65)),o=a.n(r),c=(a(86),a(87),a(39),a(6)),u=a(7),m=a(3),d=a(11),p=a(10),h=a(66),g=a(2),f=a.n(g),b=a(5),v=a(40),k=a.n(v),y=k.a.create({baseURL:"/admins/commands",responseType:"json"}),T=function(){function e(){Object(c.a)(this,e)}return Object(u.a)(e,[{key:"getClients",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("/clients");case 2:return e.abrupt("return",e.sent.data.clients);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"kickClients",value:function(){var e=Object(b.a)(f.a.mark((function e(t){var a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=6;break}return e.next=3,y.delete("/clients?imei="+t);case 3:return e.abrupt("return",e.sent.data);case 6:for(a=[],i=0;i<t.length;i++)a.push(t[i].imei);return e.next=10,y.delete("/clients?imeiList="+a);case 10:return e.abrupt("return",e.sent.data);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchImei",value:function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("/imei/hash?pure="+t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),C=a(32),E=a(17),S=a(8),w=a(16),B=a(33),x=a(34),N=a(37),I=a(67),O=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).renderFooter=i.renderFooter.bind(Object(m.a)(i)),i}return Object(u.a)(a,[{key:"renderFooter",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(S.Button,{icon:"pi pi-times",className:"p-button-text",onClick:this.props.onCancel}),n.a.createElement(S.Button,{icon:"pi pi-check",className:"p-button-text",onClick:this.props.onConfirm}))}},{key:"render",value:function(){var e=this.renderFooter();return n.a.createElement(I.Dialog,{visible:this.props.visible,style:{width:"30vw",backgroundColor:"#007ad9",color:"white"},modal:!0,header:this.props.headerText,footer:e,onHide:this.props.onHide},n.a.createElement("div",null,n.a.createElement("div",{className:"pi pi-question-circle",style:{fontSize:"1.5em"}}),n.a.createElement("br",null),this.props.message))}}]),a}(i.Component),j=a(24),D=5e3,L=function(){function e(){Object(c.a)(this,e)}return Object(u.a)(e,[{key:"getBlacklist",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("/blacklist");case 2:for(t=e.sent.data.blacklist,a=[],i=0;i<t.length;i++)a.push({imei:t[i]});return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"addToBlacklist",value:function(){var e=Object(b.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={imeilist:[]},"string"===typeof t?a.imeilist.push(t):t.forEach((function(e){a.imeilist.push(e.imei)})),e.next=4,y.post("/blacklist",a);case 4:return e.abrupt("return",e.sent.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeFromBlacklist",value:function(){var e=Object(b.a)(f.a.mark((function e(t){var a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=6;break}return e.next=3,y.delete("/blacklist?imei="+t);case 3:return e.abrupt("return",e.sent.data);case 6:for(a=[],i=0;i<t.length;i++)a.push(t[i].imei);return e.next=10,y.delete("/blacklist?imeiList="+a);case 10:return e.abrupt("return",e.sent.data);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),F=a(1),R=a(30),A=a(38),P=a(68),M="hidden",_="visible",H=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).emptyClient={imei:null},i.updateDimensions=function(){window.innerWidth<=600?i.setState({showBtnLabel:!1}):i.setState({showBtnLabel:!0})},i.state={kickClientDialog:!1,kickClientsDialogSelected:!1,addBlacklistDialog:!1,addBlacklistDialogSelected:!1,selectedClients:null,selectedClient:i.emptyClient,clients:null,searchImei:"",searchImeiLoading:M,amountClients:0,showBtnLabel:window.innerWidth>600},i.clientsService=new T,i.blacklistService=new L,i.renderButtons=i.renderButtons.bind(Object(m.a)(i)),i.hideKickClientDialog=i.hideKickClientDialog.bind(Object(m.a)(i)),i.hideKickClientsDialogSelected=i.hideKickClientsDialogSelected.bind(Object(m.a)(i)),i.confirmKickClient=i.confirmKickClient.bind(Object(m.a)(i)),i.confirmKickClientsSelected=i.confirmKickClientsSelected.bind(Object(m.a)(i)),i.kickClient=i.kickClient.bind(Object(m.a)(i)),i.kickClientsSelected=i.kickClientsSelected.bind(Object(m.a)(i)),i.hideAddBlacklistDialog=i.hideAddBlacklistDialog.bind(Object(m.a)(i)),i.hideAddBlacklistDialogSelected=i.hideAddBlacklistDialogSelected.bind(Object(m.a)(i)),i.confirmAddBlacklist=i.confirmAddBlacklist.bind(Object(m.a)(i)),i.confirmAddBlacklistSelected=i.confirmAddBlacklistSelected.bind(Object(m.a)(i)),i.addBlacklist=i.addBlacklist.bind(Object(m.a)(i)),i.addBlacklistSelected=i.addBlacklistSelected.bind(Object(m.a)(i)),i.confirmSearchImei=i.confirmSearchImei.bind(Object(m.a)(i)),i}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",this.updateDimensions),this.clientsService.getClients().then((function(t){e.setState({amountClients:t.length,clients:t})}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"hideKickClientDialog",value:function(){this.setState({kickClientDialog:!1})}},{key:"hideKickClientsDialogSelected",value:function(){this.setState({kickClientsDialogSelected:!1})}},{key:"confirmKickClient",value:function(e){this.setState({selectedClient:e,kickClientDialog:!0})}},{key:"confirmKickClientsSelected",value:function(){this.setState({kickClientsDialogSelected:!0})}},{key:"confirmSearchImei",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setState({searchImeiLoading:_}),e.next=4,this.clientsService.searchImei(this.state.searchImei);case 4:t=e.sent,this.setState({searchImeiLoading:M,globalFilter:t.hash_imei}),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),a=e.t0.response.data,this.setState({searchImeiLoading:M}),this.toast.show({severity:"error",summary:F.a.t("error"),detail:a.message,life:D});case 13:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"kickClient",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,a,i,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.state.clients.filter((function(e){return e.imei!==n.state.selectedClient.imei})),e.next=4,this.clientsService.kickClients(this.state.selectedClient.imei);case 4:a=e.sent,this.setState({clients:t,kickClientDialog:!1,selectedClient:this.emptyClient,amountClients:t.length}),this.toast.show({severity:"success",summary:F.a.t("successful"),detail:a.message,life:D}),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(0),i=e.t0.response.data,console.log(F.a.t("kickRequestFailed")+i),this.setState({kickClientDialog:!1}),this.toast.show({severity:"error",summary:F.a.t("error"),detail:i.message,life:D});case 15:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"kickClientsSelected",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,a,i,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.state.clients.filter((function(e){return!n.state.selectedClients.includes(e)})),e.next=4,this.clientsService.kickClients(this.state.selectedClients);case 4:a=e.sent,this.setState({clients:t,kickClientsDialogSelected:!1,selectedClient:this.emptyClient,amountClients:t.length}),this.toast.show({severity:"success",summary:F.a.t("successful"),detail:a.message,life:D}),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),this.setState({kickClientsDialogSelected:!1}),i=e.t0.response.data,this.toast.show({severity:"error",summary:F.a.t("error"),detail:i.message,life:D});case 14:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"hideAddBlacklistDialog",value:function(){this.setState({addBlacklistDialog:!1})}},{key:"hideAddBlacklistDialogSelected",value:function(){this.setState({addBlacklistDialogSelected:!1})}},{key:"confirmAddBlacklist",value:function(e){this.setState({selectedClient:e,addBlacklistDialog:!0})}},{key:"confirmAddBlacklistSelected",value:function(){this.setState({addBlacklistDialogSelected:!0})}},{key:"addBlacklist",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,a,i,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.state.clients.filter((function(e){return e.imei!==n.state.selectedClient.imei})),e.next=4,this.blacklistService.addToBlacklist(this.state.selectedClient.imei);case 4:a=e.sent,this.setState({clients:t,addBlacklistDialog:!1,selectedClient:this.emptyClient,amountClients:t.length}),this.toast.show({severity:"success",summary:F.a.t("successful"),detail:a.message,life:D}),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),i=e.t0.response.data,this.setState({addBlacklistDialog:!1}),this.toast.show({severity:"error",summary:F.a.t("error"),detail:i.message,life:D});case 14:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"addBlacklistSelected",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,a,i,n,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.state.clients.filter((function(e){return!s.state.selectedClients.includes(e)})),e.next=4,this.blacklistService.addToBlacklist(this.state.selectedClients);case 4:a=e.sent,this.setState({clients:t,addBlacklistDialog:!1,selectedClient:this.emptyClient,amountClients:t.length}),this.toast.show({severity:"success",summary:F.a.t("successful"),detail:a.message,life:D}),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),i=e.t0.response.data,this.setState({addBlacklistDialog:!1}),this.toast.show({severity:"error",summary:F.a.t("error"),detail:i.message,life:D});case 14:n=this.state.clients.filter((function(e){return!s.state.selectedClients.includes(e)})),this.setState({clients:n,addBlacklistDialogSelected:!1,selectedClient:this.emptyClient,amountClients:n.length}),this.toast.show({severity:"success",summary:F.a.t("successful"),detail:F.a.t("addedClientsToTheBlacklist"),life:D});case 17:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"renderButtons",value:function(e){var t=this,a={marginLeft:"0.5em"};return n.a.createElement("div",null,n.a.createElement(S.Button,{style:a,type:"button",icon:"pi pi-user-minus",className:"p-button-warning",tooltip:F.a.t("kick"),onClick:function(){t.confirmKickClient(e)},tooltipOptions:{position:"top"}}),n.a.createElement(S.Button,{style:a,type:"button",icon:"pi pi-ban",className:"p-button-danger",tooltip:F.a.t("addToTheBlacklist"),onClick:function(){t.confirmAddBlacklist(e)},tooltipOptions:{position:"top"}}),n.a.createElement(P.CopyToClipboard,{text:e.imei,onCopy:function(){t.toast.show({severity:"success",summary:F.a.t("successful"),detail:F.a.t("imeiCopied"),life:D})}},n.a.createElement(S.Button,{style:a,type:"button",icon:"pi pi-save",tooltip:F.a.t("copyToClipboard"),tooltipOptions:{position:"top"}})))}},{key:"renderHeader",value:function(){var e=this;return n.a.createElement("div",{style:{textAlign:"left"}},n.a.createElement("span",{className:"p-input-icon-left"},n.a.createElement("i",{className:"pi pi-search"}),n.a.createElement(w.InputText,{type:"search",onInput:function(t){return e.setState({globalFilter:t.target.value})},placeholder:F.a.t("globalSearch")})))}},{key:"renderFooterGroup",value:function(e){return n.a.createElement(B.ColumnGroup,null,n.a.createElement(x.Row,null,n.a.createElement(E.Column,{footer:F.a.t("activeClientsSummary"),colSpan:4,footerStyle:{textAlign:"right"}}),n.a.createElement(E.Column,{footer:e})))}},{key:"renderToolbarButton",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement(S.Button,{label:this.state.showBtnLabel?F.a.t("kick"):"",icon:"pi pi-user-minus",className:"p-button-warning",onClick:this.confirmKickClientsSelected,disabled:!this.state.selectedClients||!this.state.selectedClients.length}),n.a.createElement("div",{style:{marginLeft:"0.5em"}}),n.a.createElement(S.Button,{label:this.state.showBtnLabel?F.a.t("addToTheBlacklist"):"",icon:"pi pi-ban",className:"p-button-danger",onClick:this.confirmAddBlacklistSelected,disabled:!this.state.selectedClients||!this.state.selectedClients.length}),n.a.createElement("div",{style:{marginLeft:"0.5em"}}),n.a.createElement(S.Button,{label:this.state.showBtnLabel?F.a.t("searchByIMEI"):"",icon:"pi pi-search",onClick:function(t){return e.op.toggle(t)}}),n.a.createElement(A.OverlayPanel,{ref:function(t){return e.op=t}},n.a.createElement("div",{className:"p-inputgroup"},n.a.createElement(w.InputText,{placeholder:F.a.t("enterIMEI"),onInput:function(t){return e.setState({searchImei:t.target.value})}}),n.a.createElement(S.Button,{label:this.state.showBtnLabel?F.a.t("search"):"",icon:"pi pi-search",className:"p-button-success",disabled:""===this.state.searchImei,onClick:this.confirmSearchImei}),n.a.createElement(S.Button,{label:this.state.showBtnLabel?F.a.t("clear"):"",icon:"pi pi-times-circle",className:"p-button-success",disabled:void 0===this.state.globalFilter||""===this.state.globalFilter,onClick:function(){console.log(e.state.globalFilter),e.setState({globalFilter:""})}})),n.a.createElement("div",{style:{marginTop:"0.2em"}}),n.a.createElement(R.ProgressBar,{mode:"indeterminate",style:{height:"0.2em",visibility:this.state.searchImeiLoading}})))}},{key:"render",value:function(){var e=this,t=this.renderHeader();return n.a.createElement("div",null,n.a.createElement(j.Toast,{ref:function(t){return e.toast=t}}),n.a.createElement(N.Toolbar,{style:{border:"none",borderRadius:"0px"},left:this.renderToolbarButton()}),n.a.createElement(C.DataTable,{header:t,value:this.state.clients,totalRecords:this.state.totalRecords,footerColumnGroup:this.renderFooterGroup(this.state.amountClients),selection:this.state.selectedClients,onSelectionChange:function(t){return e.setState({selectedClients:t.value})},className:"p-datatable-clients",globalFilter:this.state.globalFilter,emptyMessage:F.a.t("clientsNotFound"),dataKey:"imei",paginator:!0,rows:10,rowsPerPageOptions:[10,25,50],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",currentPageReportTemplate:F.a.t("from")+" {first} "+F.a.t("to")+" {last} "+F.a.t("of")+" {totalRecords}",rowHover:!0,responsive:!0,resizableColumns:!0},n.a.createElement(E.Column,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),n.a.createElement(E.Column,{field:"username",header:F.a.t("username"),sortable:!0}),n.a.createElement(E.Column,{field:"imei",header:F.a.t("IMEIHash"),sortable:!0}),n.a.createElement(E.Column,{field:"token.valid_to",header:F.a.t("tokenValidTo"),sortable:!0}),n.a.createElement(E.Column,{header:F.a.t("actions"),body:this.renderButtons,style:{width:"20vw"}})),n.a.createElement(O,{headerText:F.a.t("confirm"),message:F.a.t("kickClientQuestion"),visible:this.state.kickClientDialog,onConfirm:this.kickClient,onCancel:this.hideKickClientDialog,onHide:this.hideKickClientDialog}),n.a.createElement(O,{headerText:F.a.t("confirm"),message:F.a.t("kickClientsQuestion"),visible:this.state.kickClientsDialogSelected,onConfirm:this.kickClientsSelected,onCancel:this.hideKickClientsDialogSelected,onHide:this.hideKickClientsDialogSelected}),n.a.createElement(O,{headerText:F.a.t("confirm"),message:F.a.t("addClientBlacklistQuestion"),visible:this.state.addBlacklistDialog,onConfirm:this.addBlacklist,onCancel:this.hideAddBlacklistDialog,onHide:this.hideAddBlacklistDialog}),n.a.createElement(O,{headerText:F.a.t("confirm"),message:F.a.t("addClientsBlacklistQuestion"),visible:this.state.addBlacklistDialogSelected,onConfirm:this.addBlacklistSelected,onCancel:this.hideAddBlacklistDialogSelected,onHide:this.hideAddBlacklistDialogSelected}))}}]),a}(i.Component),z=a(72),q=a(15),K=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).emptyClient={imei:null},i.emptyBlacklist=[],i.state={removeBlacklistDialog:!1,removeBlacklistDialogSelected:!1,selectedClients:null,selectedClient:i.emptyClient,blacklist:i.emptyBlacklist,addBlacklistImei:"",removeBlacklistImei:"",tagBlacklist:"tag",addBlacklistLoading:M,removeBlacklistLoading:M,blacklistSize:0},i.blacklistService=new L,i.renderRowButtons=i.renderRowButtons.bind(Object(m.a)(i)),i.hideRemoveBlacklistDialog=i.hideRemoveBlacklistDialog.bind(Object(m.a)(i)),i.hideRemoveBlacklistDialogSelected=i.hideRemoveBlacklistDialogSelected.bind(Object(m.a)(i)),i.removeBlacklist=i.removeBlacklist.bind(Object(m.a)(i)),i.removeBlacklistSelected=i.removeBlacklistSelected.bind(Object(m.a)(i)),i.confirmRemoveBlacklist=i.confirmRemoveBlacklist.bind(Object(m.a)(i)),i.confirmRemoveBlacklistSelected=i.confirmRemoveBlacklistSelected.bind(Object(m.a)(i)),i.confirmAddBlacklist=i.confirmAddBlacklist.bind(Object(m.a)(i)),i.confirmRemoveBlacklistOverlay=i.confirmRemoveBlacklistOverlay.bind(Object(m.a)(i)),i}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.blacklistService.getBlacklist();case 3:t=e.sent,this.setState({blacklist:t,blacklistSize:t.length}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Blacklist request failed: ".concat(e.t0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"confirmRemoveBlacklistSelected",value:function(){this.setState({removeBlacklistDialogSelected:!0})}},{key:"confirmRemoveBlacklist",value:function(e){this.setState({selectedClient:e,removeBlacklistDialog:!0})}},{key:"confirmAddBlacklist",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({addBlacklistLoading:_}),e.prev=1,e.next=4,this.blacklistService.addToBlacklist(this.state.addBlacklistImei);case 4:t=e.sent,(a=this.state.blacklist).push({imei:t.imeilist[0]}),this.setState({addBlacklistLoading:M,blacklist:a,addBlacklistImei:"",blacklistSize:a.length}),this.toast.show({severity:"success",summary:F.a.t("successful"),detail:t.message,life:D}),e.next=18;break;case 11:e.prev=11,e.t0=e.catch(1),i=e.t0.response.data,console.log(i),console.log(F.a.t("addBlacklistRequestFailed")+i),this.setState({addBlacklistLoading:M}),this.toast.show({severity:"error",summary:F.a.t("error"),detail:i.message,life:D});case 18:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"confirmRemoveBlacklistOverlay",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({removeBlacklistLoading:_}),e.prev=1,e.next=4,this.blacklistService.removeFromBlacklist(this.state.removeBlacklistImei);case 4:return t=e.sent,e.next=7,this.blacklistService.getBlacklist();case 7:a=e.sent,this.setState({blacklist:a,blacklistSize:a.length,removeBlacklistLoading:M,removeBlacklistImei:""}),this.toast.show({severity:"success",summary:F.a.t("successful"),detail:t.message,life:D}),e.next=19;break;case 12:e.prev=12,e.t0=e.catch(1),i=e.t0.response.data,console.log(i),console.log(F.a.t("removeBlacklistRequestFailed")+i),this.setState({removeBlacklistLoading:M}),this.toast.show({severity:"error",summary:F.a.t("error"),detail:i.message,life:D});case 19:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"hideRemoveBlacklistDialogSelected",value:function(){this.setState({removeBlacklistDialogSelected:!1})}},{key:"hideRemoveBlacklistDialog",value:function(){this.setState({removeBlacklistDialog:!1})}},{key:"removeBlacklistSelected",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,a,i=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.state.blacklist.filter((function(e){return!i.state.selectedClients.includes(e)})),e.next=4,this.blacklistService.removeFromBlacklist(this.state.selectedClients);case 4:this.setState({blacklist:t,removeBlacklistDialogSelected:!1,selectedClients:null}),this.toast.show({severity:"success",summary:F.a.t("successful"),detail:F.a.t("removeClientsFromTheBlacklist"),life:D}),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),a=e.t0.response.data,this.toast.show({severity:"error",summary:F.a.t("error"),detail:null===a?"".concat(e.t0):a.message,life:D}),this.setState({removeBlacklistDialogSelected:!1});case 13:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"removeBlacklist",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.blacklistService.removeFromBlacklist(this.state.selectedClient.imei);case 3:t=this.state.blacklist.filter((function(e){return e.imei!==a.state.selectedClient.imei})),this.setState({blacklist:t,removeBlacklistDialog:!1,blacklistSize:t.length,selectedClient:this.emptyClient}),this.toast.show({severity:"success",summary:F.a.t("successful"),detail:F.a.t("removeClientFromTheBlacklist"),life:D}),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Remove blacklist request failed: ".concat(e.t0)),this.setState({removeBlacklistDialog:!1}),this.toast.show({severity:"error",summary:F.a.t("error"),detail:"".concat(e.t0),life:D});case 13:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"renderHeader",value:function(){var e=this;return n.a.createElement("div",{style:{textAlign:"left"}},n.a.createElement("span",{className:"p-input-icon-left"},n.a.createElement("i",{className:"pi pi-search"}),n.a.createElement(w.InputText,{type:"search",onInput:function(t){return e.setState({globalFilter:t.target.value})},placeholder:F.a.t("IMEIHashSearch")})))}},{key:"renderRowButtons",value:function(e){var t=this;return n.a.createElement("div",null,n.a.createElement(S.Button,{style:{marginLeft:"0.5em"},type:"button",icon:"pi pi-lock-open",className:"p-button-danger",onClick:function(){t.confirmRemoveBlacklist(e)},tooltip:F.a.t("removeFromTheBlacklistBtn"),tooltipOptions:{position:"top"}}))}},{key:"renderToolbarButton",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement(S.Button,{label:F.a.t("add"),icon:"pi pi-ban",className:"p-button-success",onClick:function(t){return e.op.toggle(t)}}),n.a.createElement(A.OverlayPanel,{ref:function(t){return e.op=t}},n.a.createElement("div",{className:"p-inputgroup"},n.a.createElement(w.InputText,{placeholder:F.a.t("enterIMEIOrIMEIHash"),onInput:function(t){return e.setState({addBlacklistImei:t.target.value})}}),n.a.createElement(S.Button,{label:F.a.t("add"),icon:"pi pi-ban",className:"p-button-success",disabled:""===(this.state.tagBlacklist&&this.state.addBlacklistImei),onClick:this.confirmAddBlacklist})),n.a.createElement("div",{style:{marginTop:"0.2em"}}),n.a.createElement(R.ProgressBar,{mode:"indeterminate",style:{height:"0.2em",visibility:this.state.addBlacklistLoading}})),n.a.createElement("div",{style:{marginLeft:"0.5em"}}),n.a.createElement(S.Button,{label:F.a.t("remove"),icon:"pi pi-lock-open",className:"p-button-danger",onClick:this.confirmRemoveBlacklistSelected,style:{borderRadius:"3px 0px 0px 3px"},disabled:!this.state.selectedClients||!this.state.selectedClients.length}),n.a.createElement(S.Button,{label:F.a.t(""),icon:"pi pi-chevron-down",style:{borderRadius:"0px 3px 3px 0px"},className:"p-button-danger",onClick:function(t){return e.opr.toggle(t)}}),n.a.createElement(A.OverlayPanel,{ref:function(t){return e.opr=t}},n.a.createElement("div",{className:"p-inputgroup"},n.a.createElement(w.InputText,{placeholder:F.a.t("enterIMEIOrIMEIHash"),onInput:function(t){return e.setState({removeBlacklistImei:t.target.value})}}),n.a.createElement(S.Button,{label:F.a.t("remove"),icon:"pi pi-lock-open",className:"p-button-danger",disabled:""===(this.state.tagBlacklist&&this.state.removeBlacklistImei),onClick:this.confirmRemoveBlacklistOverlay})),n.a.createElement("div",{style:{marginTop:"0.2em"}}),n.a.createElement(R.ProgressBar,{mode:"indeterminate",style:{height:"0.2em",visibility:this.state.removeBlacklistLoading}})))}},{key:"renderFooterGroup",value:function(e){return n.a.createElement(B.ColumnGroup,null,n.a.createElement(x.Row,null,n.a.createElement(E.Column,{footer:F.a.t("blacklistSizeSummary"),colSpan:2,footerStyle:{textAlign:"right"}}),n.a.createElement(E.Column,{footer:e})))}},{key:"render",value:function(){var e=this,t=this.renderHeader(),a=this.renderToolbarButton();return n.a.createElement("div",null,n.a.createElement(j.Toast,{ref:function(t){return e.toast=t}}),n.a.createElement(N.Toolbar,{style:{border:"none",borderRadius:"0px"},left:a}),n.a.createElement(C.DataTable,{header:t,value:this.state.blacklist,footerColumnGroup:this.renderFooterGroup(this.state.blacklistSize),selection:this.state.selectedClients,onSelectionChange:function(t){return e.setState({selectedClients:t.value})},className:"p-datatable-blacklist",globalFilter:this.state.globalFilter,emptyMessage:F.a.t("IMEIHashNotFound"),dataKey:"imei",paginator:!0,rows:10,rowsPerPageOptions:[10,25,50],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",currentPageReportTemplate:F.a.t("from")+" {first} "+F.a.t("to")+" {last} "+F.a.t("of")+" {totalRecords}",rowHover:!0,responsive:!0,resizableColumns:!0},n.a.createElement(E.Column,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),n.a.createElement(E.Column,{field:"imei",header:F.a.t("IMEIHash"),sortable:!0}),n.a.createElement(E.Column,{header:F.a.t("actions"),body:this.renderRowButtons,style:{width:"20vw"}})),n.a.createElement(O,{headerText:F.a.t("confirm"),message:F.a.t("removeClientFromTheBlacklistQuestion"),visible:this.state.removeBlacklistDialog,onConfirm:this.removeBlacklist,onCancel:this.hideRemoveBlacklistDialog,onHide:this.hideRemoveBlacklistDialog}),n.a.createElement(O,{headerText:F.a.t("confirm"),message:F.a.t("removeClientsFromTheBlacklistQuestion"),visible:this.state.removeBlacklistDialogSelected,onConfirm:this.removeBlacklistSelected,onCancel:this.hideRemoveBlacklistDialogSelected,onHide:this.hideRemoveBlacklistDialogSelected}))}}]),a}(i.Component),U=(a(145),a(76)),W=a(41),Q=a(29),G=function(){function e(){Object(c.a)(this,e)}return Object(u.a)(e,[{key:"getDatasource",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("/datasource");case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"changeDatasource",value:function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(this.requestForm(t)),e.next=3,y.put("/datasource",this.requestForm(t));case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestForm",value:function(e){return{username:e.username,password:e.password,host:e.host,port:e.port,db_name:e.dbName,db_type:e.dbType,script_encoding:e.scriptEncoding,driver_class_name:e.driverClassName,additional:e.additional,pool:{auto_commit:e.autoCommit,connection_timeout:e.connectionTimeout,idle_timeout:e.idleTimeout,max_life_time:e.maxLifeTime,maximum_pool_size:e.maximumPoolSize}}}}]),e}(),V=a(42),J=a.n(V),$=a(69),X=a(70),Y=a(35),Z=a(44),ee=a(77);function te(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function ae(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(a=Object(ee.a)({path:"/"},a)).expires instanceof Date&&(a.expires=a.expires.toUTCString());var i=encodeURIComponent(e)+"="+encodeURIComponent(t);for(var n in a){i+="; "+n;var s=a[n];!0!==s&&(i+="="+s)}document.cookie=i}var ie=[{lng:"English",code:"en"},{lng:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",code:"ru"}];var ne={en:{translation:{clients:"Clients",kick:"Kick",addToTheBlacklist:"Add to the blacklist",copyToClipboard:"Copy IMEI to Clipboard",globalSearch:"Global Search",searchByIMEI:"Search By IMEI",username:"Username",IMEIHash:"IMEI Hash",tokenValidTo:"Token Valid To",actions:"Actions",clientsNotFound:"Clients not found",activeClientsSummary:"Active clients:",from:"",to:"to",of:"of",blacklist:"Blacklist",add:"Add",remove:"Remove",IMEIHashSearch:"IMEI Hash Search",IMEIHashNotFound:"IMEI Hash not found",blacklistSizeSummary:"Blacklist size:",logs:"Logs",type:"Type",message:"Message",selectAType:"Type",searchByMessage:"Search by Message",logsNotFound:"Logs not found",recordsSummary:"Records:",datasource:"Datasource",connection:"Connection",password:"Password",host:"Host",port:"Port",databaseName:"Database Name",databaseType:"Database Type",scriptEncoding:"Script Encoding",driverClassName:"Driver Class Name",additional:"Additional",pool:"Pool",autoCommit:"Auto Commit",autoCommitHint:"Controls the default auto-commit behavior of connections returned from the pool",connectionTimeout:"Connection Timeout",connectionTimeoutHint:"Controls the maximum number of milliseconds that a client will wait for a connection from the pool. Lowest acceptable connection timeout is 250 ms",idleTimeout:"Idle Timeout",idleTimeoutHint:"Controls the maximum amount of time that a connection is allowed to sit idle in the pool. A value of 0 means that idle connections are never removed from the pool. The minimum allowed value is 10000ms (10 seconds)",maxLifeTime:"Max Life Time",maxLifeTimeHint:"Controls the maximum lifetime of a connection in the pool. A value of 0 indicates no maximum lifetime (infinite lifetime), subject of course to the idleTimeout setting. The minimum allowed value is 30000ms (30 seconds)",maximumPoolSize:"Maximum Pool Size",maximumPoolSizeHint:"Controls the maximum size that the pool is allowed to reach, including both idle and in-use connections. Basically this value will determine the maximum number of actual connections to the database backend",applyChangesBtn:"Apply Changes",reset:"Reset",clientTimeoutValue:"Client Timeout, days",clientTimeoutValueHint:"Value '0' means no timeout.",other:"Other",language:"Language",languagePlaceholder:"Select a language",restart:"Restart",restartPage:"Restart page required",settings:"Settings",successful:"Successful",error:"Error",kickRequestFailed:"Kick client request failed: ",addedClientsToTheBlacklist:"Clients added to the blacklist",confirm:"Confrirm",kickClientQuestion:"Are you sure want to kick this client?",kickClientsQuestion:"Are you sure want to kick the selected clients?",addClientBlacklistQuestion:"Are you sure want to add this client to the blacklist?",addClientsBlacklistQuestion:"Are you sure want to add selected clients to the blacklist?",addBlacklistRequestFailed:"Add blacklist request failed: ",removeClientsFromTheBlacklist:"Clients removed from the blacklist",removeClientFromTheBlacklist:"Client removed from the blacklist",removeFromTheBlacklistBtn:"Remove from the blacklist",enterIMEI:"Enter IMEI",enterIMEIOrIMEIHash:"Enter IMEI or IMEI Hash",removeClientsFromTheBlacklistQuestion:"Are you sure want to remove the selected clients from the blacklist?",removeClientFromTheBlacklistQuestion:"Are you sure want to remove this client from the blacklist?",removeByIMEI:"Remove by IMEI",logDateSearch:"Search by Date",search:"Search",pickADate:"Pick a date",restartTime:"Restart in",restartTimeSec:" seconds",imeiCopied:"IMEI is copied",clear:"Clear",changePass:"Change password",change:"Change",enterNewPass:"Enter new password",changePassRequestFailed:"Request failed from changePass",logout:"Logout"}},ru:{translation:{clients:"\u041a\u043b\u0438\u0435\u043d\u0442\u044b",kick:"\u0418\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u044c",addToTheBlacklist:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0427\u0421",copyToClipboard:"\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c IMEI",globalSearch:"\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u043e\u0438\u0441\u043a",searchByIMEI:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e IMEI",username:"\u0418\u043c\u044f \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",IMEIHash:"\u0425\u044d\u0448 IMEI",tokenValidTo:"\u0422\u043e\u043a\u0435\u043d: \u0433\u043e\u0434\u0435\u043d \u0434\u043e",actions:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f",clientsNotFound:"\u041a\u043b\u0438\u0435\u043d\u0442\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b",activeClientsSummary:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432:",from:"c",to:"\u043f\u043e",of:"\u0438\u0437",blacklist:"\u0427\u0435\u0440\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a",add:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",remove:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",IMEIHashSearch:"\u041f\u043e\u0438\u0441\u043a \u0425\u044d\u0448 IMEI",IMEIHashNotFound:"\u0425\u044d\u0448 IMEI \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",blacklistSizeSummary:"\u041a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0432 \u0447\u0435\u0440\u043d\u043e\u043c \u0441\u043f\u0438\u0441\u043a\u0435:",logs:"\u041b\u043e\u0433\u0438",type:"\u0422\u0438\u043f",message:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",selectAType:"\u0422\u0438\u043f",searchByMessage:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044e",logsNotFound:"\u041b\u043e\u0433\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b",recordsSummary:"\u0417\u0430\u043f\u0438\u0441\u0435\u0439:",datasource:"\u0418\u0441\u0442\u043e\u0447\u043d\u0438\u043a \u0434\u0430\u043d\u043d\u044b\u0445",connection:"\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435",password:"\u041f\u0430\u0440\u043e\u043b\u044c",host:"\u0425\u043e\u0441\u0442",port:"\u041f\u043e\u0440\u0442",databaseName:"\u0418\u043c\u044f \u0411\u0430\u0437\u044b \u0414\u0430\u043d\u043d\u044b\u0445",databaseType:"\u0422\u0438\u043f \u0411\u0430\u0437\u044b \u0414\u0430\u043d\u043d\u044b\u0445",scriptEncoding:"\u041a\u043e\u0434\u0438\u0440\u043e\u0432\u043a\u0430 \u0421\u043a\u0440\u0438\u043f\u0442\u0430",driverClassName:"\u0418\u043c\u044f \u0434\u0440\u0430\u0439\u0432\u0435\u0440\u0430 \u043a\u043b\u0430\u0441\u0441\u0430",additional:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e",pool:"\u041f\u0443\u043b",autoCommit:"\u0410\u0432\u0442\u043e \u041a\u043e\u043c\u043c\u0438\u0442",autoCommitHint:"\u0423\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435\u043c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0444\u0438\u043a\u0441\u0430\u0446\u0438\u0438 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0434\u043b\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0439, \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c\u044b\u0445 \u0441 \u043f\u0443\u043b\u0430",connectionTimeout:"\u0422\u0430\u0439\u043c-\u0430\u0443\u0442 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f",connectionTimeoutHint:"\u0423\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u043c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e\u043c \u043c\u0438\u043b\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434, \u0432 \u0442\u0435\u0447\u0435\u043d\u0438\u0435 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043a\u043b\u0438\u0435\u043d\u0442 \u0431\u0443\u0434\u0435\u0442 \u043e\u0436\u0438\u0434\u0430\u0442\u044c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0438\u0437 \u043f\u0443\u043b\u0430. \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 250 \u043c\u0441.",idleTimeout:"\u0412\u0440\u0435\u043c\u044f \u043f\u0440\u043e\u0441\u0442\u043e\u044f",idleTimeoutHint:"\u0423\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0435\u043c, \u0432 \u0442\u0435\u0447\u0435\u043d\u0438\u0435 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0441\u0442\u0430\u0438\u0432\u0430\u0442\u044c \u0432 \u043f\u0443\u043b\u0435. \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0 \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442, \u0447\u0442\u043e \u043d\u0435\u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u043d\u0438\u043a\u043e\u0433\u0434\u0430 \u043d\u0435 \u0443\u0434\u0430\u043b\u044f\u044e\u0442\u0441\u044f \u0438\u0437 \u043f\u0443\u043b\u0430. \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 - 10000 \u043c\u0441 (10 \u0441\u0435\u043a\u0443\u043d\u0434).",maxLifeTime:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u0436\u0438\u0437\u043d\u0438",maxLifeTimeHint:"\u0423\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0435\u043c \u0436\u0438\u0437\u043d\u0438 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0432 \u043f\u0443\u043b\u0435. \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043d\u0430 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0436\u0438\u0437\u043d\u0438 (\u0431\u0435\u0441\u043a\u043e\u043d\u0435\u0447\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u0436\u0438\u0437\u043d\u0438), \u0441 \u0443\u0447\u0435\u0442\u043e\u043c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u043f\u0440\u043e\u0441\u0442\u043e\u044f. \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 - 30000 \u043c\u0441 (30 \u0441\u0435\u043a\u0443\u043d\u0434).",maximumPoolSize:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u043f\u0443\u043b\u0430",maximumPoolSizeHint:"\u0423\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u043c \u0440\u0430\u0437\u043c\u0435\u0440\u043e\u043c, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u0435\u0442 \u0434\u043e\u0441\u0442\u0438\u0433\u0430\u0442\u044c \u043f\u0443\u043b, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u0430\u043a \u043d\u0435\u0437\u0430\u043d\u044f\u0442\u044b\u0435, \u0442\u0430\u043a \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f. \u041e\u0431\u044b\u0447\u043d\u043e \u044d\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0444\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0439 \u043a \u0431\u044d\u043a\u044d\u043d\u0434\u0443 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445.",applyChangesBtn:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f",reset:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c",clientTimeoutValue:"\u0422\u0430\u0439\u043c-\u0430\u0443\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0430, \u0432 \u0434\u043d\u044f\u0445",clientTimeoutValueHint:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 '0' \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 \u0442\u0430\u0439\u043c-\u0430\u0443\u0442\u0430.",other:"\u0414\u0440\u0443\u0433\u043e\u0435",language:"\u042f\u0437\u044b\u043a",languagePlaceholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u044f\u0437\u044b\u043a",restart:"\u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430",restartPage:"\u0422\u0440\u0435\u0431\u0443\u044e\u0442\u0441\u044f \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",settings:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",successful:"\u0423\u0441\u043f\u0435\u0445",error:"\u041e\u0448\u0438\u0431\u043a\u0430",kickRequestFailed:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430: ",addedClientsToTheBlacklist:"\u041a\u043b\u0438\u0435\u043d\u0442\u044b \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u044b \u0432 \u0447\u0435\u0440\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a",confirm:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c",kickClientQuestion:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0438\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430?",kickClientsQuestion:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0438\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432?",addClientBlacklistQuestion:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0432 \u0447\u0435\u0440\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a?",addClientsBlacklistQuestion:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0432 \u0447\u0435\u0440\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a?",addBlacklistRequestFailed:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0447\u0435\u0440\u043d\u043e\u0433\u043e \u0441\u043f\u0438\u0441\u043a\u0430: ",removeClientsFromTheBlacklist:"\u041a\u043b\u0438\u0435\u043d\u0442\u044b \u0443\u0434\u0430\u043b\u0435\u043d\u044b \u0438\u0437 \u0447\u0435\u0440\u043d\u043e\u0433\u043e \u0441\u043f\u0438\u0441\u043a\u0430",removeClientFromTheBlacklist:"\u041a\u043b\u0438\u0435\u043d\u0442 \u0443\u0434\u0430\u043b\u0435\u043d \u0438\u0437 \u0447\u0435\u0440\u043d\u043e\u0433\u043e \u0441\u043f\u0438\u0441\u043a\u0430",removeFromTheBlacklistBtn:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u0427\u0421",enterIMEI:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 IMEI",enterIMEIOrIMEIHash:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 IMEI \u0438\u043b\u0438 \u0425\u044d\u0448 IMEI",removeClientsFromTheBlacklistQuestion:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0438\u0437 \u0447\u0435\u0440\u043d\u043e\u0433\u043e \u0441\u043f\u0438\u0441\u043a\u0430?",removeClientFromTheBlacklistQuestion:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0438\u0437 \u0447\u0435\u0440\u043d\u043e\u0433\u043e \u0441\u043f\u0438\u0441\u043a\u0430?",logDateSearch:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0414\u0430\u0442\u0435",search:"\u041f\u043e\u0438\u0441\u043a",pickADate:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443",restartTime:"\u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0447\u0435\u0440\u0435\u0437",restartTimeSec:" \u0441\u0435\u043a\u0443\u043d\u0434",imeiCopied:"IMEI \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d \u0432 \u0431\u0443\u0444\u0435\u0440 \u043e\u0431\u043c\u0435\u043d\u0430",clear:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c",changePass:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",change:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",enterNewPass:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",changePassRequestFailed:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b changePass",logout:"\u0412\u044b\u0445\u043e\u0434"}}};function se(){return void 0===te("lang")&&ae("lang","en"),te("lang")}var le,re=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).propsType={username:"username",password:"password",host:"host",port:"port",dbName:"dbName",dbType:"dbType",scriptEncoding:"scriptEncoding",driverClassName:"driverClassName",additional:"additional",autoCommit:"autoCommit",connectionTimeout:"connectionTimeout",idleTimeout:"idleTimeout",maxLifeTime:"maxLifeTime",maximumPoolSize:"maximumPoolSize",filteredEncodings:"filteredEncodings",filteredDbTypes:"filteredDbTypes",filteredDriverName:"filteredDriverName"},i.updateDimensions=function(){window.innerWidth<=600?i.setState({isToggleable:!0}):i.setState({isToggleable:!1})},i.state={username:"",password:"",host:"",port:0,dbName:"",dbType:"",scriptEncoding:"",driverClassName:"",additional:"",disabledApply:!0,disabledReset:!0,autoCommit:!0,connectionTimeout:0,idleTimeout:0,maximumPoolSize:0,encodings:[],databases:[],filteredEncodings:null,filteredDbTypes:null,filteredDriverName:null,isToggleable:!(window.innerWidth>600),current:{username:"",password:"",host:"",port:0,dbName:"",dbType:"",scriptEncoding:"",driverClassName:"",additional:"",autoCommit:!0,connectionTimeout:0,idleTimeout:0,maxLifeTime:0,maximumPoolSize:0}},i.datasourceService=new G,i.changeDatasource=i.changeDatasource.bind(Object(m.a)(i)),i.changeState=i.changeState.bind(Object(m.a)(i)),i.checkApply=i.checkApply.bind(Object(m.a)(i)),i.checkProp=i.checkProp.bind(Object(m.a)(i)),i.reset=i.reset.bind(Object(m.a)(i)),i.searchEncoding=i.searchEncoding.bind(Object(m.a)(i)),i.scriptEncodingAutoCompleteTemplate=i.scriptEncodingAutoCompleteTemplate.bind(Object(m.a)(i)),i.dbTypeAutoCompleteTemplate=i.dbTypeAutoCompleteTemplate.bind(Object(m.a)(i)),i.driverNameAutoCompleteTemplate=i.driverNameAutoCompleteTemplate.bind(Object(m.a)(i)),i.cardTemplate=i.cardTemplate.bind(Object(m.a)(i)),i.searchDriverName=i.searchDriverName.bind(Object(m.a)(i)),i.searchDbType=i.searchDbType.bind(Object(m.a)(i)),i}return Object(u.a)(a,[{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"componentDidMount",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.addEventListener("resize",this.updateDimensions),this.datasourceService.getDatasource().then((function(e){var a;t.setState({username:e.username,password:e.password,host:e.host,port:e.port,dbName:e.db_name,dbType:e.db_type,scriptEncoding:e.script_encoding,driverClassName:e.driver_class_name,additional:e.additional,autoCommit:e.pool.auto_commit,connectionTimeout:e.pool.connection_timeout,idleTimeout:e.pool.idle_timeout,maxLifeTime:e.pool.max_life_time,maximumPoolSize:e.pool.maximum_pool_size,encodings:(a=t.props.lang,"ru"===a?[{name:"Cp437",aliases:"437, IBM437",lang:"\u0410\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0439"},{name:"Cp850",aliases:"850, IBM850",lang:"\u041b\u0430\u0442\u044b\u043d\u044c"},{name:"Cp852",aliases:"852, IBM852",lang:"\u041b\u0430\u0442\u044b\u043d\u044c"},{name:"Cp855",aliases:"855, IBM855",lang:"\u041a\u0438\u0440\u0438\u043b\u043b\u0438\u0446\u0430"},{name:"Cp866",aliases:"866, IBM866",lang:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"},{name:"windows-1250",aliases:"Cp1250 cp1250",lang:"\u0412\u043e\u0441\u0442\u043e\u0447\u043d\u043e-\u0415\u0432\u0440\u043e\u043f\u0435\u0439\u0441\u043a\u0438\u0439"},{name:"windows-1251",aliases:"Cp1250 cp1250",lang:"\u041a\u0438\u0440\u0438\u043b\u043b\u0438\u0446\u0430"},{name:"windows-1252",aliases:"Cp1252 cp1252",lang:"\u041b\u0430\u0442\u044b\u043d\u044c"},{name:"ISO-8859-1",aliases:"ISO8859_1 l1",lang:"\u041b\u0430\u0442\u044b\u043d\u044c"},{name:"ISO-8859-2",aliases:"ISO8859_2 l2",lang:"\u041b\u0430\u0442\u044b\u043d\u044c"},{name:"ISO-8859-5",aliases:"ISO8859_5 cyrillic",lang:"\u041a\u0438\u0440\u0438\u043b\u043b\u0438\u0446\u0430"},{name:"ISO8859_15",aliases:"ISO8859_15 LATIN9",lang:"\u041b\u0430\u0442\u044b\u043d\u044c"},{name:"KOI8_R",aliases:"KOI8_R koi8_r koi8",lang:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"},{name:"KOI8_U",aliases:"KOI8_U koi8_u",lang:"\u0423\u043a\u0440\u0430\u0438\u043d\u0441\u043a\u0438\u0439"},{name:"UTF-8",aliases:"UTF-8, U8, utf8",lang:"\u0412\u0441\u0435 \u044f\u0437\u044b\u043a\u0438"},{name:"UTF-16",aliases:"UTF_16 unicode utf16",lang:"\u0412\u0441\u0435 \u044f\u0437\u044b\u043a\u0438"},{name:"UTF-32",aliases:"UTF_32 UTF32",lang:"\u0412\u0441\u0435 \u044f\u0437\u044b\u043a\u0438"}]:[{name:"Cp437",aliases:"437, IBM437",lang:"English"},{name:"Cp850",aliases:"850, IBM850",lang:"Latin"},{name:"Cp852",aliases:"852, IBM852",lang:"Latin"},{name:"Cp855",aliases:"855, IBM855",lang:"Cyrillic"},{name:"Cp866",aliases:"866, IBM866",lang:"Russian"},{name:"windows-1250",aliases:"Cp1250 cp1250",lang:"Eastern European"},{name:"windows-1251",aliases:"Cp1250 cp1250",lang:"Cyrillic"},{name:"windows-1252",aliases:"Cp1252 cp1252",lang:"Latin"},{name:"ISO-8859-1",aliases:"ISO8859_1 l1",lang:"Latin"},{name:"ISO-8859-2",aliases:"ISO8859_2 l2",lang:"Latin"},{name:"ISO-8859-5",aliases:"ISO8859_5 cyrillic",lang:"Cyrillic"},{name:"ISO8859_15",aliases:"ISO8859_15 LATIN9",lang:"Latin"},{name:"KOI8_R",aliases:"KOI8_R koi8_r koi8",lang:"Russian"},{name:"KOI8_U",aliases:"KOI8_U koi8_u",lang:"Ukrainian"},{name:"UTF-8",aliases:"UTF-8, U8, utf8",lang:"All Languages"},{name:"UTF-16",aliases:"UTF_16 unicode utf16",lang:"All Languages"},{name:"UTF-32",aliases:"UTF_32 UTF32",lang:"All Languages"}]),databases:[{name:"firebirdsql",driver:"org.firebirdsql.jdbc.FBDriver"},{name:"mysql",driver:"com.mysql.jdbc.Driver"},{name:"postgresql",driver:"org.postgresql.Driver"},{name:"db2",driver:"COM.ibm.db2.jdbc.app.DB2Driver"}],current:{username:e.username,password:e.password,host:e.host,port:e.port,dbName:e.db_name,dbType:e.db_type,scriptEncoding:e.script_encoding,driverClassName:e.driver_class_name,additional:e.additional,autoCommit:e.pool.auto_commit,connectionTimeout:e.pool.connection_timeout,idleTimeout:e.pool.idle_timeout,maxLifeTime:e.pool.max_life_time,maximumPoolSize:e.pool.maximum_pool_size}})}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"changeDatasource",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.datasourceService.changeDatasource(this.state);case 3:t=e.sent,this.setState({disabledApply:!0,disabledReset:!0,current:{username:this.state.username,password:this.state.password,host:this.state.host,port:this.state.port,dbName:this.state.dbName,dbType:this.state.dbType,scriptEncoding:this.state.scriptEncoding,driverClassName:this.state.driverClassName,additional:this.state.additional,autoCommit:this.state.autoCommit,connectionTimeout:this.state.connectionTimeout,idleTimeout:this.state.idleTimeout,maxLifeTime:this.state.maxLifeTime,maximumPoolSize:this.state.maximumPoolSize}}),this.props.restart(),this.toast.show({severity:"success",summary:"Successful",detail:t.message,life:D}),e.next=17;break;case 9:e.prev=9,e.t0=e.catch(0),a="";try{a=e.t0.response.data}catch(n){a=e.t0}i="Internal Server Error. :(";try{null!=a.message&&(i=a.message)}catch(s){}console.log("Change datasource failed: "+a),this.toast.show({severity:"error",summary:"Error",detail:i,life:D});case 17:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"changeState",value:function(e,t,a){var i=this.checkApply(t,a);e.disabledApply=i,e.disabledReset=i,this.setState(e)}},{key:"checkProp",value:function(e,t,a,i){return"boolean"===typeof a&&e===t||e===t?a:i}},{key:"checkApply",value:function(e,t){if("string"===typeof t){if(""===t)return!0}else if("number"===typeof t&&t<=0)return!0;var a={username:"",password:"",host:"",port:0,dbName:"",dbType:"",scriptEncoding:"",driverClassName:"",additional:"",autoCommit:!0,connectionTimeout:0,idleTimeout:0,maxLifeTime:0,maximumPoolSize:0};return a.username=this.checkProp(e,this.propsType.username,t,this.state.username),a.password=this.checkProp(e,this.propsType.password,t,this.state.password),a.host=this.checkProp(e,this.propsType.host,t,this.state.host),a.port=this.checkProp(e,this.propsType.port,t,this.state.port),a.dbName=this.checkProp(e,this.propsType.dbName,t,this.state.dbName),a.dbType=this.checkProp(e,this.propsType.dbType,t,this.state.dbType),a.scriptEncoding=this.checkProp(e,this.propsType.scriptEncoding,t,this.state.scriptEncoding),a.driverClassName=this.checkProp(e,this.propsType.driverClassName,t,this.state.driverClassName),a.additional=this.checkProp(e,this.propsType.additional,t,this.state.additional),a.autoCommit=this.checkProp(e,this.propsType.autoCommit,t,this.state.autoCommit),a.connectionTimeout=this.checkProp(e,this.propsType.connectionTimeout,t,this.state.connectionTimeout),a.idleTimeout=this.checkProp(e,this.propsType.idleTimeout,t,this.state.idleTimeout),a.maxLifeTime=this.checkProp(e,this.propsType.maxLifeTime,t,this.state.maxLifeTime),a.maximumPoolSize=this.checkProp(e,this.propsType.maximumPoolSize,t,this.state.maximumPoolSize),J.a.isEqual(a,this.state.current)}},{key:"reset",value:function(){this.setState({username:this.state.current.username,password:this.state.current.password,host:this.state.current.host,port:this.state.current.port,dbName:this.state.current.dbName,dbType:this.state.current.dbType,scriptEncoding:this.state.current.scriptEncoding,driverClassName:this.state.current.driverClassName,additional:this.state.current.additional,autoCommit:this.state.current.autoCommit,connectionTimeout:this.state.current.connectionTimeout,idleTimeout:this.state.current.idleTimeout,maxLifeTime:this.state.current.maxLifeTime,maximumPoolSize:this.state.current.maximumPoolSize,disabledApply:!0,disabledReset:!0})}},{key:"searchEncoding",value:function(e){this.autoSearch(e,this.state.encodings,this.propsType.filteredEncodings,"name")}},{key:"searchDriverName",value:function(e){this.autoSearch(e,this.state.databases,this.propsType.filteredDriverName,"driver")}},{key:"searchDbType",value:function(e){this.autoSearch(e,this.state.databases,this.propsType.filteredDbTypes,"name")}},{key:"autoSearch",value:function(e,t,a,i){var n=this;setTimeout((function(){var s;s=e.query.trim().length?t.filter((function(t){return t[i].toLowerCase().startsWith(e.query.toLowerCase())})):Object(U.a)(t);var l={};l[a]=s,n.setState(l)}),250)}},{key:"scriptEncodingAutoCompleteTemplate",value:function(e){return n.a.createElement("div",null,n.a.createElement("span",{className:"p-card",style:{padding:"0.3em"}},e.name),n.a.createElement("span",{style:{marginLeft:"0.2em"}}),n.a.createElement("span",{className:"p-card",style:{padding:"0.3em"}},e.lang))}},{key:"dbTypeAutoCompleteTemplate",value:function(e){return this.cardTemplate(e.name)}},{key:"driverNameAutoCompleteTemplate",value:function(e){return this.cardTemplate(e.driver)}},{key:"cardTemplate",value:function(e){return n.a.createElement("div",null,n.a.createElement("span",{className:"p-card",style:{padding:"0.3em"}},e))}},{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement(j.Toast,{ref:function(t){return e.toast=t}}),n.a.createElement(Q.Fieldset,{toggleable:this.state.isToggleable,legend:F.a.t("datasource"),style:{marginTop:"1em"}},n.a.createElement("div",{className:"p-grid"},n.a.createElement("div",{className:"p-col-12 p-md-6"},n.a.createElement(Q.Fieldset,{toggleable:this.state.isToggleable,legend:F.a.t("connection"),style:{marginTop:"1em"}},n.a.createElement("div",{className:"p-grid p-dir-col"},n.a.createElement("div",{className:"p-col"},n.a.createElement("label",{htmlFor:"username",className:"p-d-block",style:{textAlign:"left"}},F.a.t("username")),n.a.createElement(w.InputText,{value:this.state.username,autoComplete:"off",id:"username",className:"p-d-block",onChange:function(t){e.changeState({username:t.target.value,disabledApply:!0,disabledReset:!0},e.propsType.username,t.target.value)},style:{width:"100%"}})),n.a.createElement("div",{className:"p-col"},n.a.createElement("label",{htmlFor:"password",className:"p-d-block",style:{textAlign:"left"}},F.a.t("password")),n.a.createElement(W.Password,{value:this.state.password,id:"password",className:"p-d-block",feedback:!1,onChange:function(t){e.changeState({password:t.target.value,disabledApply:!0,disabledReset:!0},e.propsType.password,t.target.value)},style:{width:"100%"}})),n.a.createElement("div",{className:"p-col"},n.a.createElement("label",{htmlFor:"host",className:"p-d-block",style:{textAlign:"left"}},F.a.t("host")),n.a.createElement(w.InputText,{value:this.state.host,id:"host",className:"p-d-block",style:{width:"100%"},onChange:function(t){e.changeState({host:t.target.value,disabledApply:!0,disabledReset:!0},e.propsType.host,t.target.value)}})),n.a.createElement("div",{className:"p-col"},n.a.createElement("label",{htmlFor:"port",className:"p-d-block",style:{textAlign:"left"}},F.a.t("port")),n.a.createElement(w.InputText,{id:"port",value:this.state.port,style:{width:"100%"},onChange:function(t){var a=parseInt(t.target.value,10);a=isNaN(a)?0:a,e.changeState({port:a,disabledApply:!0,disabledReset:!0},e.propsType.port,a)}})),n.a.createElement("div",{className:"p-col"},n.a.createElement("label",{htmlFor:"dbName",className:"p-d-block",style:{textAlign:"left"}},F.a.t("databaseName")),n.a.createElement(w.InputText,{value:this.state.dbName,id:"dbName",className:"p-d-block",style:{width:"100%"},onChange:function(t){e.changeState({dbName:t.target.value,disabledApply:!0,disabledReset:!0},e.propsType.dbName,t.target.value)}})),n.a.createElement("div",{className:"p-col"},n.a.createElement("label",{htmlFor:"dbType",className:"p-d-block",style:{textAlign:"left"}},F.a.t("databaseType")),n.a.createElement(Z.AutoComplete,{value:this.state.dbType,id:"dbType",style:{width:"100%"},suggestions:this.state.filteredDbTypes,completeMethod:this.searchDbType,dropdown:!0,itemTemplate:this.dbTypeAutoCompleteTemplate,field:"name",onChange:function(t){var a=t.target.value.name;void 0===a&&(a=t.target.value),e.changeState({dbType:a,disabledApply:!0,disabledReset:!0},e.propsType.dbType,a)}})),n.a.createElement("div",{className:"p-col"},n.a.createElement("label",{htmlFor:"scriptEncoding",className:"p-d-block",style:{textAlign:"left"}},F.a.t("scriptEncoding")),n.a.createElement(Z.AutoComplete,{value:this.state.scriptEncoding,id:"scriptEncoding",style:{width:"100%"},suggestions:this.state.filteredEncodings,completeMethod:this.searchEncoding,dropdown:!0,itemTemplate:this.scriptEncodingAutoCompleteTemplate,field:"name",onChange:function(t){var a=t.target.value.name;void 0===a&&(a=t.target.value),e.changeState({scriptEncoding:a,disabledApply:!0,disabledReset:!0},e.propsType.scriptEncoding,a)}})),n.a.createElement("div",{className:"p-col"},n.a.createElement("label",{htmlFor:"driverClassName",className:"p-d-block",style:{textAlign:"left"}},F.a.t("driverClassName")),n.a.createElement(Z.AutoComplete,{value:this.state.driverClassName,id:"driverClassName",style:{width:"100%"},suggestions:this.state.filteredDriverName,completeMethod:this.searchDriverName,dropdown:!0,itemTemplate:this.driverNameAutoCompleteTemplate,field:"driver",onChange:function(t){var a=t.target.value.driver;void 0===a&&(a=t.target.value),e.changeState({driverClassName:a,disabledApply:!0,disabledReset:!0},e.propsType.driverClassName,a)}})),n.a.createElement("div",{className:"p-col"},n.a.createElement("label",{htmlFor:"additional",className:"p-d-block",style:{textAlign:"left"}},F.a.t("additional")),n.a.createElement($.InputTextarea,{value:this.state.additional,id:"additional",autoResize:!0,className:"p-d-block",style:{width:"100%"},onChange:function(t){e.changeState({additional:t.target.value,disabledApply:!0,disabledReset:!0},e.propsType.additional,t.target.value)}}))))),n.a.createElement("div",{className:"p-col-12 p-md-6"},n.a.createElement(Q.Fieldset,{toggleable:this.state.isToggleable,legend:F.a.t("pool"),style:{marginTop:"1em"}},n.a.createElement("div",{className:"p-grid p-dir-col"},n.a.createElement("div",{className:"p-col"},n.a.createElement("div",{className:"p-field-checkbox"},n.a.createElement(X.Checkbox,{inputId:"autoCommitCheckbox",checked:this.state.autoCommit,onChange:function(t){e.changeState({autoCommit:t.checked,disabledApply:!0,disabledReset:!0},e.propsType.autoCommit,t.checked)}}),n.a.createElement("label",{htmlFor:"autoCommitCheckbox"},F.a.t("autoCommit")),n.a.createElement(Y.Tooltip,{target:".autoCommitQuestion"}),n.a.createElement("span",{className:"pi pi-question autoCommitQuestion",style:{marginLeft:"0.5em",fontSize:"0.8em"},"data-pr-tooltip":F.a.t("autoCommitHint")}))),n.a.createElement("div",{className:"p-col"},n.a.createElement("label",{htmlFor:"connectionTimeout",className:"p-d-block",style:{textAlign:"left"}},F.a.t("connectionTimeout")),n.a.createElement("div",{className:"p-field-checkbox"},n.a.createElement(w.InputText,{id:"connectionTimeout",value:this.state.connectionTimeout,style:{width:"100%"},onChange:function(t){var a=parseInt(t.target.value,10);a=isNaN(a)?0:a,e.changeState({connectionTimeout:a,disabledApply:!0,disabledReset:!0},e.propsType.connectionTimeout,a)}}),n.a.createElement(Y.Tooltip,{target:".connTout",position:"top"}),n.a.createElement("span",{className:"pi pi-question connTout",style:{marginLeft:"0.5em",fontSize:"0.8em"},"data-pr-tooltip":F.a.t("connectionTimeoutHint")}))),n.a.createElement("div",{className:"p-col"},n.a.createElement("label",{htmlFor:"idleTimeout",className:"p-d-block",style:{textAlign:"left"}},F.a.t("idleTimeout")),n.a.createElement("div",{className:"p-field-checkbox"},n.a.createElement(w.InputText,{id:"idleTimeout",value:this.state.idleTimeout,style:{width:"100%"},onChange:function(t){var a=parseInt(t.target.value,10);a=isNaN(a)?0:a,e.changeState({idleTimeout:a,disabledApply:!0,disabledReset:!0},e.propsType.idleTimeout,a)}}),n.a.createElement(Y.Tooltip,{target:".idleTout",position:"top"}),n.a.createElement("span",{className:"pi pi-question idleTout",style:{marginLeft:"0.5em",fontSize:"0.8em"},"data-pr-tooltip":F.a.t("idleTimeoutHint")}))),n.a.createElement("div",{className:"p-col"},n.a.createElement("label",{htmlFor:"maxLifeTime",className:"p-d-block",style:{textAlign:"left"}},F.a.t("maxLifeTime")),n.a.createElement("div",{className:"p-field-checkbox"},n.a.createElement(w.InputText,{id:"maxLifeTime",value:this.state.maxLifeTime,style:{width:"100%"},onChange:function(t){var a=parseInt(t.target.value,10);a=isNaN(a)?0:a,e.changeState({maxLifeTime:a,disabledApply:!0,disabledReset:!0},e.propsType.maxLifeTime,a)}}),n.a.createElement(Y.Tooltip,{target:".maxLifeTime",position:"top"}),n.a.createElement("span",{className:"pi pi-question maxLifeTime",style:{marginLeft:"0.5em",fontSize:"0.8em"},"data-pr-tooltip":F.a.t("maxLifeTimeHint")}))),n.a.createElement("div",{className:"p-col"},n.a.createElement("label",{htmlFor:"maximumPoolSize",className:"p-d-block",style:{textAlign:"left"}},F.a.t("maximumPoolSize")),n.a.createElement("div",{className:"p-field-checkbox"},n.a.createElement(w.InputText,{id:"maximumPoolSize",value:this.state.maximumPoolSize,style:{width:"100%"},onChange:function(t){var a=parseInt(t.target.value,10);a=isNaN(a)?0:a,e.changeState({maximumPoolSize:a,disabledApply:!0,disabledReset:!0},e.propsType.maximumPoolSize,a)}}),n.a.createElement(Y.Tooltip,{target:".maxPoolSize",position:"top"}),n.a.createElement("span",{className:"pi pi-question maxPoolSize",style:{marginLeft:"0.5em",fontSize:"0.8em"},"data-pr-tooltip":F.a.t("maximumPoolSizeHint")}))))))),n.a.createElement("div",{className:"p-grid p-dir-col"},n.a.createElement("div",{className:"p-col-12",style:{marginTop:"1em"}},n.a.createElement(S.Button,{label:F.a.t("applyChangesBtn"),style:{float:"left",width:"100%"},disabled:this.state.disabledApply,onClick:this.changeDatasource})),n.a.createElement("div",{className:"p-col-12",style:{marginTop:"1em"}},n.a.createElement(S.Button,{className:"p-button-warning",label:F.a.t("reset"),style:{float:"left",width:"100%"},disabled:this.state.disabledReset,onClick:this.reset})))))}}]),a}(i.Component),oe=function(){function e(){Object(c.a)(this,e)}return Object(u.a)(e,[{key:"getClientTimeout",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("/clients/timeout");case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"changeClientTimeout",value:function(){var e=Object(b.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={client_timeout:t},e.next=3,y.put("/clients/timeout",a);case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ce=(a(63),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).smallHintStyleClasses={visible:"sm-cl-tout-hint-v",hidden:"sm-cl-tout-hint-h"},i.settingsType={clientTimeout:"clientTimeout"},i.updateDimensions=function(){window.innerWidth<=600?i.setState({isToggleable:!0}):i.setState({isToggleable:!1})},i.state={clientTimeout:0,disabledApply:!0,disabledReset:!0,isToggleable:!(window.innerWidth>600),smallStyleClass:i.smallHintStyleClasses.hidden,current:{clientTimeout:0}},i.clientTimeoutService=new oe,i.changeClientSettings=i.changeClientSettings.bind(Object(m.a)(i)),i.changeState=i.changeState.bind(Object(m.a)(i)),i.checkApply=i.checkApply.bind(Object(m.a)(i)),i.checkSetting=i.checkSetting.bind(Object(m.a)(i)),i.reset=i.reset.bind(Object(m.a)(i)),i}return Object(u.a)(a,[{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"componentDidMount",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.addEventListener("resize",this.updateDimensions),this.clientTimeoutService.getClientTimeout().then((function(e){t.setState({clientTimeout:e.client_timeout,current:{clientTimeout:e.client_timeout}})}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"changeClientSettings",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.clientTimeoutService.changeClientTimeout(this.state.clientTimeout);case 3:t=e.sent,this.setState({current:{clientTimeout:this.state.clientTimeout},disabledApply:!0,disabledReset:!0}),this.toast.show({severity:"success",summary:"Successful",detail:t.message,life:D}),this.props.restart(),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(0),a=e.t0.response.data,console.log(a),console.log("Change clients timeout failed: "+a),this.toast.show({severity:"error",summary:"Error",detail:a.message,life:D});case 15:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"changeState",value:function(e,t,a){var i=this.checkApply(t,a);e.disabledApply=i,e.disabledReset=i,this.setState(e)}},{key:"checkSetting",value:function(e,t,a,i){return e===t?a:i}},{key:"checkApply",value:function(e,t){if("string"===typeof t){if(""===t)return!0}else if("number"===typeof t&&t<0)return!0;var a={clientTimeout:0};return a.clientTimeout=this.checkSetting(e,this.settingsType.clientTimeout,t,this.state.clientTimeout),J.a.isEqual(a,this.state.current)}},{key:"reset",value:function(){this.setState({clientTimeout:this.state.current.clientTimeout,disabledApply:!0,disabledReset:!0})}},{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement(j.Toast,{ref:function(t){return e.toast=t}}),n.a.createElement(Q.Fieldset,{toggleable:this.state.isToggleable,legend:F.a.t("clients"),style:{marginTop:"1em"}},n.a.createElement("div",{className:"p-grid p-dir-col"},n.a.createElement("div",{className:"p-col"},n.a.createElement("label",{htmlFor:"clTout",className:"p-d-block",style:{textAlign:"left"}},F.a.t("clientTimeoutValue")),n.a.createElement(w.InputText,{value:this.state.clientTimeout,"aria-describedby":"clTout-help",onChange:function(t){var a=parseInt(t.target.value,10);a=isNaN(a)?0:a,e.changeState({clientTimeout:a,disabledApply:!0,disabledReset:!0},e.settingsType.clientTimeout,a)},onFocus:function(){return e.setState({smallStyleClass:e.smallHintStyleClasses.visible})},onBlur:function(){return e.setState({smallStyleClass:e.smallHintStyleClasses.hidden})},autoComplete:"off",id:"clTout",className:"p-d-block",style:{width:"100%"}}),n.a.createElement("small",{id:"clTout-help",className:this.state.smallStyleClass,style:{float:"left",marginTop:"0.3em"}},F.a.t("clientTimeoutValueHint"))),n.a.createElement("div",{className:"p-col",style:{marginTop:"1em"}},n.a.createElement(S.Button,{label:F.a.t("applyChangesBtn"),disabled:this.state.disabledApply,style:{float:"left",width:"100%"},onClick:this.changeClientSettings})),n.a.createElement("div",{className:"p-col",style:{marginTop:"1em"}},n.a.createElement(S.Button,{className:"p-button-warning",label:F.a.t("reset"),disabled:this.state.disabledReset,style:{float:"left",width:"100%"},onClick:this.reset})))))}}]),a}(i.Component)),ue=function(){function e(){Object(c.a)(this,e)}return Object(u.a)(e,[{key:"restart",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("/restart");case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),me=a(43),de=function(){function e(){Object(c.a)(this,e)}return Object(u.a)(e,[{key:"changePassword",value:function(){var e=Object(b.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={password:t},e.next=3,y.put("/password",a);case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=te("XSRF-TOKEN"),a={"XSRF-TOKEN":t},e.next=4,k.a.post("/logout",a);case 4:return e.abrupt("return",e.sent.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),pe=a(47),he=(a(154),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).updateDimensions=function(){window.innerWidth<=600?i.setState({isToggleable:!0}):i.setState({isToggleable:!1})},i.state={selectedLang:i.props.lang,isDarkMode:i.props.isDarkMode,newPass:"",changePassLoading:M,isToggleable:!(window.innerWidth>600)},i.onLangChange=i.onLangChange.bind(Object(m.a)(i)),i.confirmChangePass=i.confirmChangePass.bind(Object(m.a)(i)),i.settingsService=new de,i}return Object(u.a)(a,[{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateDimensions)}},{key:"onLangChange",value:function(e){var t;this.setState({selectedLang:e.value}),t=e.value,F.a.changeLanguage(t),ae("lang",t),this.props.refresh()}},{key:"confirmChangePass",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setState({changePassLoading:_}),e.next=4,this.settingsService.changePassword(this.state.newPass);case 4:t=e.sent,this.setState({changePassLoading:M}),this.toast.show({severity:"success",summary:F.a.t("successful"),detail:t.message,life:D}),this.props.restart(),e.next=18;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),a=e.t0.response.data,console.log(a),console.log(F.a.t("changePassRequestFailed")+a),this.setState({changePassLoading:M}),this.toast.show({severity:"error",summary:F.a.t("error"),detail:a.message,life:D});case 18:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement(j.Toast,{ref:function(t){return e.toast=t}}),n.a.createElement(Q.Fieldset,{toggleable:this.state.isToggleable,legend:F.a.t("other"),style:{marginTop:"1em"}},n.a.createElement("div",{className:"p-grid p-dir-col"},n.a.createElement("div",{className:"p-col"},n.a.createElement("label",{htmlFor:"clTout",className:"p-d-block",style:{textAlign:"left"}},F.a.t("language")),n.a.createElement(me.Dropdown,{style:{float:"left",marginTop:"0.2em"},value:this.state.selectedLang,options:ie,onChange:this.onLangChange,optionLabel:"lng",optionValue:"code",placeholder:F.a.t("languagePlaceholder")})),n.a.createElement("div",{className:"p-col"},n.a.createElement(pe.Accordion,null,n.a.createElement(pe.AccordionTab,{header:F.a.t("changePass"),className:"changePass"},n.a.createElement("div",{className:"p-inputgroup"},n.a.createElement(W.Password,{promptLabel:F.a.t("enterNewPass"),weakLabel:F.a.t("weak"),mediumLabel:F.a.t("medium"),strongLabel:F.a.t("strong"),onInput:function(t){return e.setState({newPass:t.target.value})}}),n.a.createElement(S.Button,{label:F.a.t("change"),icon:"pi pi-key",className:"p-button-success",disabled:""===this.state.newPass,onClick:this.confirmChangePass})),n.a.createElement("div",{style:{marginTop:"0.2em"}}),n.a.createElement(R.ProgressBar,{mode:"indeterminate",style:{height:"0.2em",visibility:this.state.changePassLoading}})))))))}}]),a}(i.Component)),ge=!1,fe="pi pi-refresh",be="pi pi-spin pi-refresh",ve=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).state={showRestartButton:ge,iconButtonClassName:fe,restartBtnText:F.a.t("restart")},i.restartService=new ue,i.needRestart=i.needRestart.bind(Object(m.a)(i)),i.refresh=i.refresh.bind(Object(m.a)(i)),i.restart=i.restart.bind(Object(m.a)(i)),i}return Object(u.a)(a,[{key:"needRestart",value:function(){ge=!0,this.setState({showRestartButton:ge}),window.scrollTo({top:0,behavior:"smooth"})}},{key:"refresh",value:function(){this.forceUpdate(),this.props.refresh()}},{key:"restart",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({iconButtonClassName:be}),e.next=3,this.restartService.restart();case 3:t=e.sent,this.toast.show({severity:"success",summary:F.a.t("successful"),detail:t.message,life:D}),ge=!1,5,a=F.a.t("restartTime")+" 5"+F.a.t("restartTimeSec")+"...",this.setState({restartBtnText:a}),setTimeout((function(){window.location.replace("/login")}),5e3);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(j.Toast,{ref:function(t){return e.toast=t}}),this.state.showRestartButton?n.a.createElement(S.Button,{className:"p-button-rounded p-button-outlined",style:{marginTop:"0.5em"},icon:this.state.iconButtonClassName,label:this.state.restartBtnText,onClick:this.restart}):n.a.createElement("div",null),n.a.createElement("div",{className:"p-grid nested-grid"},n.a.createElement("div",{className:"p-col-12 p-md-8 p-lg-8"},n.a.createElement(re,{restart:this.needRestart,lang:this.props.lang})),n.a.createElement("div",{className:"p-col-12 p-md-4 p-lg-4"},n.a.createElement("div",{className:"p-grid p-dir-col"},n.a.createElement("div",{className:"p-col"},n.a.createElement(ce,{restart:this.needRestart})),n.a.createElement("div",{className:"p-col"},n.a.createElement(he,{restart:this.needRestart,refresh:this.refresh,lang:this.props.lang}))))))}}]),a}(i.Component),ke=function(){function e(){Object(c.a)(this,e)}return Object(u.a)(e,[{key:"getLogs",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("/logs");case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ye=a(71),Te=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).updateDimensions=function(){window.innerWidth<=600?i.setState({isMobile:!0}):i.setState({isMobile:!1})},i.handleSearch=function(){clearTimeout(i.delaySearchTimer),i.delaySearchTimer=setTimeout((function(){i.setState({globalFilter:i.state.searchText})}),500)},i.state={logs:null,logsAmount:0,searchText:"",date:null,types:[],selectedTypes:null,searchChips:[],minDate:null,maxDate:null,isMobile:!(window.innerWidth>600)},i.logService=new ke,i.delaySearchTimer=null,i.handleSearch=i.handleSearch.bind(Object(m.a)(i)),i.headerTemplate=i.headerTemplate.bind(Object(m.a)(i)),i.typeBodyTemplate=i.typeBodyTemplate.bind(Object(m.a)(i)),i.onTypeFilterChange=i.onTypeFilterChange.bind(Object(m.a)(i)),i.onMessageFilterInput=i.onMessageFilterInput.bind(Object(m.a)(i)),i.typeItemTemplate=i.typeItemTemplate.bind(Object(m.a)(i)),i}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",this.updateDimensions),this.logService.getLogs().then((function(t){var a=[];t.logs.forEach((function(e){a.push(e.date)}));var i=a.sort(),n=i[0].split("-").map((function(e){return+e})),s=i[i.length-1].split("-").map((function(e){return+e})),l=new Date(n[2],n[1]-1,n[0]),r=new Date(s[2],s[1]-1,s[0]);e.setState({logs:t.logs,logsAmount:t.logs.length,types:t.types,minDate:l,maxDate:r})}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"componentDidUpdate",value:function(e,t){t.searchText!==this.state.searchText&&this.handleSearch()}},{key:"headerTemplate",value:function(e){return n.a.createElement("div",{className:"p-card",style:{padding:"0.5em",display:"inline-block"}},n.a.createElement("div",{style:{fontWeight:"bold",fontSize:"16pt"}},e.date))}},{key:"footerTemplate",value:function(){return n.a.createElement(n.a.Fragment,null)}},{key:"typeBodyTemplate",value:function(e){return"Error"===e.type?n.a.createElement("div",{style:{color:"#D32F2F",fontWeight:"bold"}},e.type):n.a.createElement("div",{style:{color:"#689F38",fontWeight:"bold"}},e.type)}},{key:"renderHeader",value:function(){var e,t=this;return n.a.createElement("div",{style:{textAlign:"left"}},n.a.createElement("span",{className:"p-input-icon-left"},n.a.createElement("i",{className:"pi pi-search"}),n.a.createElement(w.InputText,{type:"search",onInput:function(e){return t.setState({searchText:e.target.value})},placeholder:F.a.t("globalSearch")})),this.state.isMobile?n.a.createElement("div",null):n.a.createElement(ye.Calendar,{ref:function(e){return t.cal=e},dateFormat:"dd.mm.yy",placeholder:F.a.t("pickADate"),value:this.state.date,style:{width:"300px",marginLeft:"0.5em",textAlign:"left"},minDate:this.state.minDate,maxDate:this.state.maxDate,readOnlyInput:!0,showButtonBar:!0,locale:(e=this.props.lang,"ru"===e?{firstDayOfWeek:1,dayNames:["\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0412\u0442\u043e\u0440\u043d\u0438\u043a","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041f\u044f\u0442\u043d\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043e\u0442\u0430","\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435"],dayNamesShort:["\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431","\u0412\u0441"],dayNamesMin:["\u041f","\u0412","\u0421","\u0427","\u041f","\u0421","\u0412"],monthNames:["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"],monthNamesShort:["\u042f\u043d\u0432","\u0424\u0435\u0432","\u041c\u0430\u0440","\u0410\u043f\u0440","\u041c\u0430\u0439","\u0418\u044e\u043d","\u0418\u044e\u043b","\u0410\u0432\u0433","\u0421\u0435\u043d","\u041e\u043a\u0442","\u041d\u043e\u0432","\u0414\u0435\u043a"],today:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f",clear:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c",weekHeader:"\u041d\u0434"}:{firstDayOfWeek:0,dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",weekHeader:"Wk"}),onChange:function(e){t.setState({date:e.value});try{var a=e.value,i=a.getDate(),n=i/10<1?"0":"",s=[i,a.getMonth()+1,a.getFullYear()].join(".");t.onMessageFilterInput(n+s)}catch(l){t.onMessageFilterInput("")}}}))}},{key:"renderFooterGroup",value:function(e){var t=F.a.t("recordsSummary")+" "+e;return n.a.createElement(B.ColumnGroup,null,n.a.createElement(x.Row,null,n.a.createElement(E.Column,{footer:t,colSpan:3,footerStyle:{textAlign:"right"}})))}},{key:"renderTypeFilter",value:function(){return n.a.createElement(me.Dropdown,{value:this.state.selectedTypes,options:this.state.types,onChange:this.onTypeFilterChange,itemTemplate:this.typeItemTemplate,showClear:!0,placeholder:F.a.t("selectAType"),className:"p-column-filter"})}},{key:"renderMessageFilter",value:function(){var e=this;return n.a.createElement(w.InputText,{style:{width:"30em"},onInput:function(t){return e.onMessageFilterInput(t.target.value)},className:"p-column-filter",placeholder:F.a.t("searchByMessage")})}},{key:"typeItemTemplate",value:function(e){return"Error"===e?n.a.createElement("span",{style:{color:"#D32F2F",fontWeight:"bold"}},e):n.a.createElement("span",{style:{color:"#689F38",fontWeight:"bold"}},e)}},{key:"onTypeFilterChange",value:function(e){this.dt.filter(e.value,"type","equals"),this.setState({selectedTypes:e.value})}},{key:"onMessageFilterInput",value:function(e){this.dt.filter(e,"msg","contains")}},{key:"render",value:function(){var e=this,t=this.renderHeader(),a=this.renderTypeFilter(),i=this.renderMessageFilter();return n.a.createElement("div",null,n.a.createElement(C.DataTable,{ref:function(t){return e.dt=t},header:t,value:this.state.logs,rowGroupMode:"subheader",groupField:"date",emptyMessage:F.a.t("logsNotFound"),sortMode:"single",sortField:"date",globalFilter:this.state.globalFilter,rowGroupHeaderTemplate:this.headerTemplate,rowGroupFooterTemplate:this.footerTemplate,footerColumnGroup:this.renderFooterGroup(this.state.logsAmount),sortOrder:1,paginator:!0,rows:10,rowsPerPageOptions:[10,25,50],responsive:!0,paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",currentPageReportTemplate:F.a.t("from")+" {first} "+F.a.t("to")+" {last} "+F.a.t("of")+" {totalRecords}"},n.a.createElement(E.Column,{header:"#",body:function(e,t){return t.rowIndex+1},style:{width:"5%",color:"gray"}}),n.a.createElement(E.Column,{field:"type",body:this.typeBodyTemplate,header:F.a.t("type"),style:{width:"10%"},filter:!0,filterElement:a}),n.a.createElement(E.Column,{field:"msg",header:F.a.t("message"),style:{width:"85%",wordWrap:"break-word"},filter:!this.state.isMobile,filterElement:i})))}}]),a}(i.Component),Ce=(a(157),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).menus=[{label:F.a.t("clients"),keyLabel:"clients",icon:"pi pi-fw pi-users",path:"/clients",command:function(){window.location.hash="/clients"}},{label:F.a.t("blacklist"),keyLabel:"blacklist",icon:"pi pi-fw pi-ban",path:"/blacklist",command:function(){window.location.hash="/blacklist"}},{label:F.a.t("logs"),keyLabel:"logs",icon:"pi pi-fw pi-desktop",path:"/logs",command:function(){window.location.hash="/logs"}},{label:F.a.t("settings"),keyLabel:"settings",icon:"pi pi-fw pi-cog",path:"/settings",command:function(){window.location.hash="/settings"}}],n.refresh=n.refresh.bind(Object(m.a)(n)),n.tabRef=Object(i.createRef)();var s=n.menus[0];if(void 0!==te("tabKeyLabel")){var l=te("tabKeyLabel");s=n.menus.find((function(e,t,a){return e.keyLabel===l&&e}))}return n.state={activeItem:s,tabName:F.a.t(s.keyLabel)},n}return Object(u.a)(a,[{key:"refresh",value:function(){this.forceUpdate(),this.menus.forEach((function(e){e.label=F.a.t(e.keyLabel)})),this.setState({tabName:F.a.t(this.state.activeItem.keyLabel)})}},{key:"setActiveIndex",value:function(e){var t=this.menus.filter((function(t){return t.path===e}));this.setState({activeItem:t[0],tabName:F.a.t(t[0].keyLabel)})}},{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{id:"tabName",style:{fontSize:"3rem"}},this.state.tabName),n.a.createElement(h.TabMenu,{id:"lsTabMenu",ref:this.tabRef,onTabChange:function(t){ae("tabKeyLabel",t.value.keyLabel),ae("hashLink",t.value.path),e.setState({activeItem:t.value})},activeItem:this.state.activeItem,model:this.menus}))}}]),a}(i.Component)),Ee=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).lsTabRef=n.a.createRef(),i.refresh=i.refresh.bind(Object(m.a)(i)),i}return Object(u.a)(a,[{key:"refresh",value:function(){this.lsTabRef.current.refresh()}},{key:"setActiveIndex",value:function(e){this.lsTabRef.current.setActiveIndex(e)}},{key:"render",value:function(){var e=this;return n.a.createElement(z.a,null,n.a.createElement(Ce,{ref:this.lsTabRef}),n.a.createElement(q.a,{key:"/clients",exact:!0,path:"/clients",component:function(){return n.a.createElement(H,null)}}),n.a.createElement(q.a,{key:"/blacklist",exact:!0,path:"/blacklist",component:function(){return n.a.createElement(K,null)}}),n.a.createElement(q.a,{key:"/logs",exact:!0,path:"/logs",component:function(){return n.a.createElement(Te,{lang:se()})}}),n.a.createElement(q.a,{key:"/settings",exact:!0,path:"/settings",component:function(){return n.a.createElement(ve,{refresh:e.refresh,lang:se()})}}))}}]),a}(i.Component),Se=a(74),we=a(75),Be=a.n(we),xe=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).changeRoute=i.changeRoute.bind(Object(m.a)(i)),i.refresh=i.refresh.bind(Object(m.a)(i)),i.logout=i.logout.bind(Object(m.a)(i)),i.settingsService=new de,i}return Object(u.a)(a,[{key:"changeRoute",value:function(e){ae("tabKeyLabel",e.substr(1)),ae("hashLink",e),window.location.hash=e,this.props.onHideSidebar(e)}},{key:"logout",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.settingsService.logout();case 2:window.location.replace("/login");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){this.forceUpdate()}},{key:"render",value:function(){var e=this;return n.a.createElement(Se.Sidebar,{visible:this.props.onShowSidebar,onHide:this.props.onHideSidebar},n.a.createElement("img",{src:Be.a,alt:"",width:"64",height:"64"}),n.a.createElement("h1",{style:{fontWeight:"normal"}},"LightSearch"),n.a.createElement("div",{className:"p-grid p-dir-col"},n.a.createElement(S.Button,{icon:"pi pi-fw pi-users",label:F.a.t("clients"),onClick:function(){return e.changeRoute("/clients")}}),n.a.createElement(S.Button,{icon:"pi pi-fw pi-ban",label:F.a.t("blacklist"),style:{marginTop:"0.5em"},onClick:function(){return e.changeRoute("/blacklist")}}),n.a.createElement(S.Button,{icon:"pi pi-fw pi-desktop",label:F.a.t("logs"),style:{marginTop:"0.5em"},onClick:function(){return e.changeRoute("/logs")}}),n.a.createElement(S.Button,{icon:"pi pi-fw pi-cog",label:F.a.t("settings"),style:{marginTop:"0.5em"},onClick:function(){return e.changeRoute("/settings")}}),n.a.createElement(S.Button,{icon:"pi pi-fw pi-sign-out",label:F.a.t("logout"),className:"p-button-secondary",style:{marginTop:"0.5em"},onClick:function(){e.logout().then((function(e){return console.log(e)}))}})))}}]),a}(i.Component),Ne=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).state={isSidebarVisible:!1},i.onHideSidebar=i.onHideSidebar.bind(Object(m.a)(i)),i}return Object(u.a)(a,[{key:"onHideSidebar",value:function(e){this.setState({isSidebarVisible:!1}),void 0!==e&&this.props.tabMenuRef.current.setActiveIndex(e)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(xe,{refresh:this.props.refresh,onShowSidebar:this.state.isSidebarVisible,onHideSidebar:this.onHideSidebar}),n.a.createElement(S.Button,{icon:"pi pi-bars",className:"p-button-secondary",style:{position:"sticky",marginLeft:"0.3em",float:"left"},onClick:function(){e.setState({isSidebarVisible:!0})}}))}}]),a}(i.Component),Ie=se();le=Ie,F.a.init({resources:ne,lng:le});var Oe=te("hashLink");window.location.hash=void 0!==Oe?Oe:"clients";var je=function(){var e=n.a.createRef();return n.a.createElement("div",{className:"App"},n.a.createElement(Ne,{tabMenuRef:e}),n.a.createElement("div",{style:{margin:"1em"}},n.a.createElement("img",{src:o.a,alt:"logo",width:"150",height:"150"})),n.a.createElement("div",{className:"p-card",style:{padding:"0.5em",borderRadius:"3px"}},n.a.createElement(Ee,{ref:e})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(je,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},63:function(e,t,a){},65:function(e,t,a){e.exports=a.p+"static/media/ls_logo_big.e65af6f7.png"},75:function(e,t,a){e.exports=a.p+"static/media/ls_logo_svg.54d4b73c.svg"},79:function(e,t,a){e.exports=a(161)},84:function(e,t,a){},85:function(e,t,a){}},[[79,1,2]]]);
//# sourceMappingURL=main.1ebf4f87.chunk.js.map